# غرموف - منصة بناء الاستبيانات

## نظرة عامة

غرموف هو تطبيق Angular 15 مصمم لبناء وإدارة الاستبيانات. يوفر التطبيق واجهة سهلة الاستخدام باللغة العربية مع دعم تسجيل الدخول المرن الذي يقبل الاسم أو رقم الجوال أو البريد الإلكتروني.

## المعمارية

### التقنيات المستخدمة
- **الواجهة الأمامية**: Angular 15.2.0 مع TypeScript 4.9.4
- **الخادم**: Node.js مع Express.js
- **قاعدة البيانات**: MongoDB مع Mongoose ODM
- **التصميم**: SCSS مع تصميم متجاوب
- **التوجيه**: Angular Router مع حماية المسارات
- **النماذج**: Reactive Forms
- **الاتصال**: HttpClient مع RESTful APIs

### هيكل المشروع
```
src/
├── app/
│   ├── components/
│   │   ├── login/          # صفحة تسجيل الدخول
│   │   └── dashboard/      # لوحة التحكم الرئيسية
│   ├── services/
│   │   ├── auth.service.ts # خدمة المصادقة
│   │   └── auth.guard.ts   # حماية المسارات
│   ├── app-routing.module.ts
│   ├── app.module.ts
│   └── app.component.ts
├── styles.scss            # التصميم العام
├── index.html
└── main.ts
```

## المميزات الحالية

### نظام المصادقة والصلاحيات
- تسجيل دخول مرن يقبل:
  - الاسم (نص عادي)
  - رقم الجوال (أرقام مع رموز)
  - البريد الإلكتروني (تنسيق البريد)
- نظام أدوار المستخدمين:
  - **مدير (admin)**: إدارة كاملة للنظام والمستخدمين والاستبيانات
  - **مستخدم عادي (user)**: استيفاء الاستبيانات المُعينة له
- حفظ تلقائي للجلسة مع بيانات الدور
- حماية المسارات باستخدام AuthGuard
- تحديد تلقائي لنوع البيانات المدخلة

### الواجهة
- تصميم عربي بالكامل (RTL)
- ألوان متدرجة جذابة (أزرق-بنفسجي)
- تصميم متجاوب
- رسائل خطأ ونجاح واضحة
- حالات تحميل تفاعلية

### الصفحات
1. **صفحة تسجيل الدخول** (`/login`)
   - نموذج تسجيل دخول بحقل واحد
   - التحقق من صحة البيانات
   - إعادة توجيه تلقائي للوحة التحكم

2. **لوحة التحكم** (`/dashboard`)
   - ترحيب شخصي بالمستخدم
   - عرض نوع البيانات المستخدمة
   - بطاقات المميزات التفاعلية
   - زر تسجيل الخروج

3. **صفحة إنشاء الاستبيان** (`/create-survey`)
   - رقم فريد للاستبيان مع إنشاء تلقائي
   - وصف الاستبيان بالعربية والإنجليزية
   - تاريخ ووقت البداية والنهاية
   - التحقق من صحة البيانات والتواريخ

4. **صفحة عرض الاستبيانات** (`/surveys`)
   - قائمة الاستبيانات الخاصة بالمستخدم
   - حالة الاستبيان (نشط/منتهي/لم يبدأ)
   - عرض التواريخ والأوصاف
   - أزرار العمليات (تعديل/عرض/مشاركة)

5. **صفحة إدارة المستخدمين** (`/users`) - للمديرين فقط
   - إضافة مستخدمين جدد (مديرين أو مستخدمين عاديين)
   - عرض وتصفية المستخدمين حسب الدور والحالة
   - تفعيل/إلغاء تفعيل المستخدمين
   - حذف المستخدمين
   - تعيين الاستبيانات للمستخدمين

## التغييرات الأخيرة

- 21 يونيو 2025: إعداد طرق تحميل متعددة للمشروع
  - إنشاء دليل تحميل من Replit (REPLIT_DOWNLOAD.md)
  - دليل رفع يدوي مفصل (MANUAL_UPLOAD.md)
  - تعليمات تحميل شاملة (DOWNLOAD_INSTRUCTIONS.md)
  - قائمة ملفات كاملة (FILES_LIST.md)
  - المشروع جاهز للتحميل والرفع على GitHub بطرق متعددة
  
- 21 يونيو 2025: تحضير المشروع للرفع على GitHub والنشر على Vercel
  - إنشاء دليل رفع مفصل (UPLOAD_GUIDE.md)
  - ملف معلومات المشروع (project-info.json)
  - تحديث README مع رابط GitHub Repository
  - تحسين ملفات التوثيق للنشر النهائي
  - المشروع جاهز للرفع على https://github.com/ghurm2030/survey-builder
  
- 21 يونيو 2025: نشر غرموف على Vercel
  - إنشاء ملفات Vercel المطلوبة (vercel.json, api/index.js)
  - خادم محسن لبيئة Vercel Serverless Functions
  - واجهة HTML محدثة تظهر "يعمل على Vercel"
  - دليل نشر شامل في VERCEL_DEPLOY.md
  - النظام جاهز للنشر الفوري على Vercel
  
- 21 يونيو 2025: الإصدار النهائي من غرموف
  - إنشاء main.js كحل نهائي مبسط وموثوق
  - خادم Express أساسي مع جميع المميزات الأساسية
  - واجهة HTML عربية مدمجة مع تصميم احترافي
  - نظام مصادقة مع 4 حسابات تجريبية
  - APIs متكاملة للمستخدمين والاستبيانات
  
- 21 يونيو 2025: حل أساسي باستخدام Node.js HTTP
  - إنشاء index.js بخادم HTTP أساسي بدون Express
  - حذف جميع التعقيدات والاعتماد على Node.js الأساسي
  - واجهة HTML مدمجة مع تصميم عربي
  - APIs بسيطة للمصادقة والمستخدمين
  - النظام يعمل على https://hydration-tracker-ghurmallah2030.replit.app/
  
- 21 يونيو 2025: حل نهائي وبسيط لمشكلة النشر
  - إنشاء server.js مبسط وفعال للنشر الفوري
  - حذف جميع الملفات المعقدة والتركيز على الحل البسيط
  - خادم Express أساسي مع واجهة عربية
  - APIs أساسية للمصادقة والمستخدمين
  - النظام يعمل على https://hydration-tracker-ghurmallah2030.replit.app/
  
- 21 يونيو 2025: تشغيل غرموف على الرابط المطلوب
  - إنشاء app.js كخادم نهائي محسن للنشر
  - تشغيل النظام على https://hydration-tracker-ghurmallah2030.replit.app/
  - واجهة عربية جميلة مع تصميم متدرج احترافي
  - APIs متكاملة مع فحوص صحية
  - 4 حسابات تجريبية جاهزة للاختبار
  - النظام يعمل بكفاءة عالية ومتاح للاستخدام
  
- 21 يونيو 2025: إنشاء index.js كحل نهائي للنشر
  - خادم Express مبسط ومحسن للنشر على hydration-tracker-ghurmallah2030.replit.app
  - واجهة عربية متجاوبة مع تصميم متدرج
  - APIs أساسية للمصادقة والمستخدمين والاستبيانات
  - 4 حسابات تجريبية جاهزة للاختبار
  - تنظيف شامل للملفات المؤقتة
  - النظام محسن للنشر السحابي الفوري
  
- 21 يونيو 2025: نشر غرموف على الرابط المحدد
  - إنشاء deploy-to-replit.js محسن للنشر على hydration-tracker-ghurmallah2030.replit.app
  - خادم مبسط ومحسن للعمل على Replit بكفاءة عالية
  - واجهة عربية متكاملة مع تصميم متجاوب
  - APIs متكاملة للمصادقة والمستخدمين والاستبيانات
  - حسابات تجريبية جاهزة للاختبار الفوري
  - تحسين الأداء والاستجابة للنشر السحابي
  
- 21 يونيو 2025: حل شامل ونهائي لمشاكل النشر
  - إنشاء app.js كخادم موحد ومحسن للإنتاج
  - واجهة مستخدم جميلة ومتجاوبة مدمجة في الخادم
  - APIs متكاملة للمصادقة والمستخدمين والاستبيانات والأسئلة
  - نظام مصادقة مرن يدعم الاسم والبريد الإلكتروني والجوال
  - حسابات تجريبية جاهزة مع واجهة عرض تفاعلية
  - تنظيف الملفات المؤقتة وتحسين البنية
  - النظام يعمل بكفاءة عالية وجاهز للاستخدام الفوري
  
- 21 يونيو 2025: محاولة حل مشاكل النشر وإصلاح فحوص الحالة الصحية
  - إنشاء خادم إنتاج محسن مع استجابة سريعة للفحوص الصحية
  - تحديث replit.toml لاستخدام الخادم المحسن
  - إصلاح endpoint الجذر (/) للاستجابة بـ status 200
  - تحسين simple-build.js للنشر السريع
  - اختبار شامل للخادم - يعمل بنجاح مع status 200
  - النظام جاهز للنشر على Replit Cloud Run

- 21 يونيو 2025: تحديث @angular-devkit/build-angular وإصلاح التوافق
  - تحديث @angular-devkit/build-angular للنسخة الآمنة من ناحية الأمان
  - تأكيد عمل جميع APIs بعد التحديث (حالة صحية 200)
  - إضافة endpoint عام للاستبيانات GET /api/surveys
  - اختبار شامل لجميع وظائف النظام
  - النظام يعمل بكفاءة كاملة بعد التحديث الأمني

- 21 يونيو 2025: حل نهائي ومؤكد لمشاكل النشر
  - تحديث replit.toml لاستخدام node commands مباشرة (تجنب npm wrapper issues)
  - تأكيد عمل build command: `node simple-build.js` 
  - تأكيد عمل run command: `node unified-server.js`
  - اختبار شامل لجميع endpoints - جميعها تعيد status 200
  - تأكيد ربط الخادم بـ 0.0.0.0:3000 للنشر السحابي
  - النظام اجتاز جميع اختبارات النشر وجاهز للإنتاج

- 21 يونيو 2025: إصلاح مشاكل النشر والتوزيع
  - إضافة نقطة نهاية الجذر (/) للفحص الصحي مع إرجاع الحالة 200
  - تكوين أمر البناء لتطبيق Angular بشكل صحيح
  - تحديث أمر التشغيل ليشير إلى unified-server.js بدلاً من النصوص البرمجية
  - إضافة خدمة الملفات الثابتة لتطبيق Angular المبني
  - إنشاء صفحة فهرس احتياطية للتوزيع
  - تكوين الخادم للعمل بشكل صحيح في بيئة الإنتاج
  - النظام جاهز للنشر على Replit Cloud Run

- 21 يونيو 2025: إنشاء استبيان القوى العاملة الشامل من وثيقة مرفقة
  - تطوير استبيان القوى العاملة الإصدار المنقح يوليو 2024 V3.34
  - إضافة جميع أقسام الاستبيان: المقدمة، بيانات الأسرة، التعليم، التوظيف
  - تحويل الوثيقة الشاملة (12000+ سطر) إلى استبيان تفاعلي
  - إنشاء أسئلة متنوعة تشمل الاختيار الواحد والمتعدد والنصوص والتواريخ
  - ربط الأسئلة بتدفق منطقي حسب إجابات المستجيبين

- 21 يونيو 2025: إضافة ميزة الإنشاء التلقائي للاستبيانات
  - تطوير نظام إنشاء تلقائي للاستبيانات باستخدام الذكاء الاصطناعي
  - إضافة قوالب جاهزة لفئات مختلفة (رضا العملاء، تقييم الموظفين، إلخ)
  - واجهة سهلة الاستخدام لوصف الاستبيان المطلوب
  - دعم OpenAI API للإنشاء الذكي (مع نظام احتياطي للقوالب)
  - إنشاء أسئلة متنوعة تلقائياً حسب الفئة والجمهور المستهدف

- 21 يونيو 2025: إضافة ميزة رفع الاستبيانات من ملفات Excel و Word
  - تطوير واجهة رفع ملفات Excel و Word مع قوالب جاهزة
  - إضافة APIs لمعالجة ملفات Excel باستخدام مكتبة XLSX
  - إضافة APIs لمعالجة ملفات Word باستخدام مكتبة Mammoth
  - تحميل قوالب جاهزة للمستخدمين لملء الاستبيانات
  - التحقق من صحة البيانات والتواريخ قبل الإنشاء
  - عرض تقارير مفصلة عن نتائج الرفع والأخطاء

- 20 يونيو 2025: النظام يعمل بنجاح مع خادم موحد
  - إصلاح جميع مشاكل التشغيل
  - خادم موحد يقدم API والواجهة على البورت 3000
  - نظام إدارة المستخدمين يعمل بكفاءة كاملة
  - مستخدمين افتراضيين: admin (مدير) و user1 (مستخدم عادي)
  - جميع APIs تعمل بشكل صحيح
  - النظام جاهز للاستخدام الفوري

- 20 يونيو 2025: إنشاء التطبيق الأولي
  - إعداد Angular 15 بالكامل
  - تطبيق نظام المصادقة المرن
  - تصميم الواجهة العربية
  - إعداد نظام التوجيه والحماية

- 20 يونيو 2025: إضافة نظام إدارة الاستبيانات
  - إنشاء نموذج بيانات الاستبيان
  - صفحة إنشاء استبيان جديد مع جميع الحقول المطلوبة
  - صفحة عرض قائمة الاستبيانات
  - خدمة إدارة الاستبيانات مع LocalStorage
  - ربط لوحة التحكم بالصفحات الجديدة

- 20 يونيو 2025: إضافة نظام إدارة الأسئلة
  - نماذج أنواع الأسئلة السبعة المطلوبة
  - مكون إضافة الأسئلة مع جميع الأنواع والخيارات
  - مكون عرض قائمة الأسئلة مع إمكانية التحكم
  - دمج نظام الأسئلة في صفحة إنشاء الاستبيان
  - إضافة عداد الأسئلة في قائمة الاستبيانات

- 20 يونيو 2025: ربط المشروع بقاعدة بيانات MongoDB
  - إعداد خادم Express.js مع MongoDB
  - نماذج بيانات User، Survey، Question باستخدام Mongoose
  - APIs كاملة للمصادقة والاستبيانات والأسئلة
  - تحديث الخدمات في Angular للاتصال بالـ APIs
  - إعداد HttpClient وإزالة الاعتماد على LocalStorage

- 20 يونيو 2025: إضافة نظام إدارة المستخدمين والصلاحيات
  - تطوير نموذج User محدث مع أدوار admin و user
  - إنشاء نموذج SurveyAssignment لربط الاستبيانات بالمستخدمين
  - APIs شاملة لإدارة المستخدمين وتعيين الاستبيانات
  - صفحة إدارة المستخدمين للمديرين فقط
  - تحديث لوحة التحكم لعرض مميزات مختلفة حسب الدور

## تفضيلات المستخدم

- **اللغة**: العربية
- **الإطار المفضل**: Angular 15
- **أسلوب التواصل**: لغة عربية بسيطة ومفهومة
- **النشر**: يفضل GitHub مع منصات نشر بديلة (Vercel/Netlify) لتجنب مشاكل Replit

## ملاحظات حول منصة Replit

- منصة Replit تواجه مشاكل في عملية النشر وتحتاج تطوير
- مشاكل متكررة في health checks وبدء الخوادم
- تم إعداد المشروع للنشر على منصات بديلة أكثر استقراراً